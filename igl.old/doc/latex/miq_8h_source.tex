\hypertarget{miq_8h_source}{}\doxysection{miq.\+h}
\label{miq_8h_source}\index{igl/copyleft/comiso/miq.h@{igl/copyleft/comiso/miq.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// This file is part of libigl, a simple c++ geometry processing library.}}
\DoxyCodeLine{2 \textcolor{comment}{//}}
\DoxyCodeLine{3 \textcolor{comment}{// Copyright (C) 2014 Daniele Panozzo <daniele.panozzo@gmail.com>, Olga Diamanti <olga.diam@gmail.com>, Kevin Walliman <wkevin@student.ethz.ch>}}
\DoxyCodeLine{4 \textcolor{comment}{//}}
\DoxyCodeLine{5 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla Public License}}
\DoxyCodeLine{6 \textcolor{comment}{// v. 2.0. If a copy of the MPL was not distributed with this file, You can}}
\DoxyCodeLine{7 \textcolor{comment}{// obtain one at http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef IGL\_COMISO\_MIQ\_H}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define IGL\_COMISO\_MIQ\_H}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}../../igl\_inline.h"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <Eigen/Core>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{namespace }igl}
\DoxyCodeLine{15 \{}
\DoxyCodeLine{16   \textcolor{keyword}{namespace }copyleft}
\DoxyCodeLine{17   \{}
\DoxyCodeLine{18   \textcolor{keyword}{namespace }comiso}
\DoxyCodeLine{19   \{}
\DoxyCodeLine{20     \textcolor{comment}{// Global seamless parametrization aligned with a given per-\/face Jacobian (PD1, PD2).}}
\DoxyCodeLine{21     \textcolor{comment}{// The algorithm is based on}}
\DoxyCodeLine{22     \textcolor{comment}{// "{}Mixed-\/Integer Quadrangulation"{} by D. Bommes, H. Zimmer, L. Kobbelt}}
\DoxyCodeLine{23     \textcolor{comment}{// ACM SIGGRAPH 2009, Article No. 77 (http://dl.acm.org/citation.cfm?id=1531383)}}
\DoxyCodeLine{24     \textcolor{comment}{// We thank Nico Pietroni for providing a reference implementation of MIQ}}
\DoxyCodeLine{25     \textcolor{comment}{// on which our code is based.}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27     \textcolor{comment}{//  Limitations:}}
\DoxyCodeLine{28     \textcolor{comment}{//  -\/  Due to the way of handling of hardFeatures the algorithm  may fail in difficult cases.}}
\DoxyCodeLine{29     \textcolor{comment}{//  -\/  Meshes with boundaries are not hendled properly i.e., jagged edges along the boundary are possible}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31     \textcolor{comment}{// Input:}}
\DoxyCodeLine{32     \textcolor{comment}{// V                 \#V by 3 list of mesh vertex 3D positions}}
\DoxyCodeLine{33     \textcolor{comment}{// F                 \#F by 3 list of faces indices in V}}
\DoxyCodeLine{34     \textcolor{comment}{// PD1               \#V by 3 first line of the Jacobian per triangle}}
\DoxyCodeLine{35     \textcolor{comment}{// PD2               \#V by 3 second line of the Jacobian per triangle}}
\DoxyCodeLine{36     \textcolor{comment}{//                   (optional, if empty it will be a vector in the tangent plane orthogonal to PD1)}}
\DoxyCodeLine{37     \textcolor{comment}{// gradientSize      global scaling for the gradient (controls the quads resolution)}}
\DoxyCodeLine{38     \textcolor{comment}{// stiffness         weight for the stiffness iterations (Reserved but not used!)}}
\DoxyCodeLine{39     \textcolor{comment}{// directRound       greedily round all integer variables at once (greatly improves optimization speed but lowers quality)}}
\DoxyCodeLine{40     \textcolor{comment}{// iter              stiffness iterations (0 = no stiffness)}}
\DoxyCodeLine{41     \textcolor{comment}{// localIter         number of local iterations for the integer rounding}}
\DoxyCodeLine{42     \textcolor{comment}{// doRound           enables the integer rounding (disabling it could be useful for debugging)}}
\DoxyCodeLine{43     \textcolor{comment}{// singularityRound  set true/false to decide if the singularities' coordinates should be rounded to the nearest integers}}
\DoxyCodeLine{44     \textcolor{comment}{// roundVertices     id of additional vertices that should be snapped to integer coordinates}}
\DoxyCodeLine{45     \textcolor{comment}{// hardFeatures      \#H by 2 list of pairs of vertices that belongs to edges that should be snapped to integer coordinates}}
\DoxyCodeLine{46     \textcolor{comment}{//}}
\DoxyCodeLine{47     \textcolor{comment}{// Output:}}
\DoxyCodeLine{48     \textcolor{comment}{// UV                 \#UV by 2 list of vertices in 2D}}
\DoxyCodeLine{49     \textcolor{comment}{// FUV                \#FUV by 3 list of face indices in UV}}
\DoxyCodeLine{50     \textcolor{comment}{//}}
\DoxyCodeLine{51     \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedV, \textcolor{keyword}{typename} DerivedF, \textcolor{keyword}{typename} DerivedU>}
\DoxyCodeLine{52     IGL\_INLINE \textcolor{keywordtype}{void} miq(}
\DoxyCodeLine{53       \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedV> \&V,}
\DoxyCodeLine{54       \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedF> \&F,}
\DoxyCodeLine{55       \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedV> \&PD1,}
\DoxyCodeLine{56       \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedV> \&PD2,}
\DoxyCodeLine{57       Eigen::PlainObjectBase<DerivedU> \&UV,}
\DoxyCodeLine{58       Eigen::PlainObjectBase<DerivedF> \&FUV,}
\DoxyCodeLine{59       \textcolor{keywordtype}{double} gradientSize = 30.0,}
\DoxyCodeLine{60       \textcolor{keywordtype}{double} stiffness = 5.0,}
\DoxyCodeLine{61       \textcolor{keywordtype}{bool} directRound = \textcolor{keyword}{false},}
\DoxyCodeLine{62       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} iter = 5,}
\DoxyCodeLine{63       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} localIter = 5,}
\DoxyCodeLine{64       \textcolor{keywordtype}{bool} doRound = \textcolor{keyword}{true},}
\DoxyCodeLine{65       \textcolor{keywordtype}{bool} singularityRound = \textcolor{keyword}{true},}
\DoxyCodeLine{66       \textcolor{keyword}{const} std::vector<int> \&roundVertices = std::vector<int>(),}
\DoxyCodeLine{67       \textcolor{keyword}{const} std::vector<std::vector<int>> \&hardFeatures = std::vector<std::vector<int> >());}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{comment}{// Helper function that allows to directly provided pre-\/combed bisectors for an already cut mesh}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71     \textcolor{comment}{// Input:}}
\DoxyCodeLine{72     \textcolor{comment}{// V                  \#V by 3 list of mesh vertex 3D positions}}
\DoxyCodeLine{73     \textcolor{comment}{// F                  \#F by 3 list of faces indices in V}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     \textcolor{comment}{// Additional Input:}}
\DoxyCodeLine{76     \textcolor{comment}{// PD1\_combed         \#F by 3 first combed Jacobian}}
\DoxyCodeLine{77     \textcolor{comment}{// PD2\_combed         \#F by 3 second combed Jacobian}}
\DoxyCodeLine{78     \textcolor{comment}{// mismatch             \#F by 3 list of per-\/corner integer PI/2 rotations}}
\DoxyCodeLine{79     \textcolor{comment}{// singular           \#V list of flag that denotes if a vertex is singular or not}}
\DoxyCodeLine{80     \textcolor{comment}{// seams              \#F by 3 list of per-\/corner flag that denotes seams}}
\DoxyCodeLine{81 }
\DoxyCodeLine{82     \textcolor{comment}{// Input:}}
\DoxyCodeLine{83     \textcolor{comment}{// gradientSize       global scaling for the gradient (controls the quads resolution)}}
\DoxyCodeLine{84     \textcolor{comment}{// stiffness          weight for the stiffness iterations (Reserved but not used!)}}
\DoxyCodeLine{85     \textcolor{comment}{// directRound        greedily round all integer variables at once (greatly improves optimization speed but lowers quality)}}
\DoxyCodeLine{86     \textcolor{comment}{// iter               stiffness iterations (0 = no stiffness)}}
\DoxyCodeLine{87     \textcolor{comment}{// localIter          number of local iterations for the integer rounding}}
\DoxyCodeLine{88     \textcolor{comment}{// doRound            enables the integer rounding (disabling it could be useful for debugging)}}
\DoxyCodeLine{89     \textcolor{comment}{// singularityRound   set true/false to decide if the singularities' coordinates should be rounded to the nearest integers}}
\DoxyCodeLine{90     \textcolor{comment}{// roundVertices      id of additional vertices that should be snapped to integer coordinates}}
\DoxyCodeLine{91     \textcolor{comment}{// hardFeatures       \#H by 2 list of pairs of vertices that belongs to edges that should be snapped to integer coordinates}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     \textcolor{comment}{// Output:}}
\DoxyCodeLine{94     \textcolor{comment}{// UV                 \#UV by 2 list of vertices in 2D}}
\DoxyCodeLine{95     \textcolor{comment}{// FUV                \#FUV by 3 list of face indices in UV}}
\DoxyCodeLine{96     \textcolor{comment}{//}}
\DoxyCodeLine{97     \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedV, \textcolor{keyword}{typename} DerivedF, \textcolor{keyword}{typename} DerivedU>}
\DoxyCodeLine{98     IGL\_INLINE \textcolor{keywordtype}{void} miq(}
\DoxyCodeLine{99       \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedV> \&V,}
\DoxyCodeLine{100       \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedF> \&F,}
\DoxyCodeLine{101       \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedV> \&PD1\_combed,}
\DoxyCodeLine{102       \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedV> \&PD2\_combed,}
\DoxyCodeLine{103       \textcolor{keyword}{const} Eigen::Matrix<int, Eigen::Dynamic, 3> \&mismatch,}
\DoxyCodeLine{104       \textcolor{keyword}{const} Eigen::Matrix<int, Eigen::Dynamic, 1> \&singular,}
\DoxyCodeLine{105       \textcolor{keyword}{const} Eigen::Matrix<int, Eigen::Dynamic, 3> \&seams,}
\DoxyCodeLine{106       Eigen::PlainObjectBase<DerivedU> \&UV,}
\DoxyCodeLine{107       Eigen::PlainObjectBase<DerivedF> \&FUV,}
\DoxyCodeLine{108       \textcolor{keywordtype}{double} gradientSize = 30.0,}
\DoxyCodeLine{109       \textcolor{keywordtype}{double} stiffness = 5.0,}
\DoxyCodeLine{110       \textcolor{keywordtype}{bool} directRound = \textcolor{keyword}{false},}
\DoxyCodeLine{111       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} iter = 5,}
\DoxyCodeLine{112       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} localIter = 5,}
\DoxyCodeLine{113       \textcolor{keywordtype}{bool} doRound = \textcolor{keyword}{true},}
\DoxyCodeLine{114       \textcolor{keywordtype}{bool} singularityRound = \textcolor{keyword}{true},}
\DoxyCodeLine{115       \textcolor{keyword}{const} std::vector<int> \&roundVertices = std::vector<int>(),}
\DoxyCodeLine{116       \textcolor{keyword}{const} std::vector<std::vector<int>> \&hardFeatures = std::vector<std::vector<int> >());}
\DoxyCodeLine{117   \};}
\DoxyCodeLine{118 \};}
\DoxyCodeLine{119 \};}
\DoxyCodeLine{120 \textcolor{preprocessor}{\#ifndef IGL\_STATIC\_LIBRARY}}
\DoxyCodeLine{121 \textcolor{preprocessor}{\#include "{}miq.cpp"{}}}
\DoxyCodeLine{122 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
