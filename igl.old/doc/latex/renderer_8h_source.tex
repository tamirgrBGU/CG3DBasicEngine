\hypertarget{renderer_8h_source}{}\doxysection{renderer.\+h}
\label{renderer_8h_source}\index{igl/opengl/glfw/renderer.h@{igl/opengl/glfw/renderer.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include <igl/igl\_inline.h>}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{5 \textcolor{comment}{//\#include <igl/opengl/ViewerCore.h>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}DrawInfo.h"{}}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <igl/opengl/glfw/Viewer.h>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <igl/opengl/glfw/imgui/ImGuiMenu.h>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <igl/opengl/glfw/imgui/ImGuiHelpers.h>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <../imgui/imgui.h>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}../DrawBuffer.h"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}../Camera.h"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}../ViewerData.h"{}}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{struct }GLFWwindow;}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 }
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{class }\mbox{\hyperlink{class_renderer}{Renderer}} }
\DoxyCodeLine{20 \{}
\DoxyCodeLine{21 \textcolor{keyword}{public}:}
\DoxyCodeLine{22     \mbox{\hyperlink{class_renderer}{Renderer}}(\textcolor{keywordtype}{float} angle, \textcolor{keywordtype}{float} relationWH, \textcolor{keywordtype}{float} near, \textcolor{keywordtype}{float} far);}
\DoxyCodeLine{23 }
\DoxyCodeLine{24     \textcolor{keyword}{enum} buffersMode \{}
\DoxyCodeLine{25         COLOR, DEPTH, STENCIL, BACK, FRONT, NONE}
\DoxyCodeLine{26     \};}
\DoxyCodeLine{27     \textcolor{keyword}{enum} transformations \{}
\DoxyCodeLine{28         xTranslate,}
\DoxyCodeLine{29         yTranslate,}
\DoxyCodeLine{30         zTranslate,}
\DoxyCodeLine{31         xRotate,}
\DoxyCodeLine{32         yRotate,}
\DoxyCodeLine{33         zRotate,}
\DoxyCodeLine{34         xScale,}
\DoxyCodeLine{35         yScale,}
\DoxyCodeLine{36         zScale,}
\DoxyCodeLine{37         scaleAll,}
\DoxyCodeLine{38         xCameraTranslate,}
\DoxyCodeLine{39         yCameraTranslate,}
\DoxyCodeLine{40         zCameraTranslate}
\DoxyCodeLine{41     \};}
\DoxyCodeLine{42     \textcolor{keyword}{enum} drawFlags \{}
\DoxyCodeLine{43         toClear = 1,}
\DoxyCodeLine{44         is2D = 2,}
\DoxyCodeLine{45         inAction = 4,}
\DoxyCodeLine{46         scissorTest = 8,}
\DoxyCodeLine{47         depthTest = 16,}
\DoxyCodeLine{48         stencilTest = 32,}
\DoxyCodeLine{49         blend = 64,}
\DoxyCodeLine{50         blackClear = 128,}
\DoxyCodeLine{51         clearDepth = 256,}
\DoxyCodeLine{52         backdraw = 512,}
\DoxyCodeLine{53         clearStencil = 1024,}
\DoxyCodeLine{54         passStencil = 2048,}
\DoxyCodeLine{55         inAction2 = 4096,}
\DoxyCodeLine{56         none = 8192,}
\DoxyCodeLine{57         scaleAbit = 16384,}
\DoxyCodeLine{58         stencil2 = 32768,}
\DoxyCodeLine{59         onPicking = 65536}
\DoxyCodeLine{60     \};}
\DoxyCodeLine{61     \textcolor{keyword}{enum} \{}
\DoxyCodeLine{62         preRot, postRot, phiRot, thetaRot, psiRot, psiPhiRot}
\DoxyCodeLine{63     \};}
\DoxyCodeLine{64     \textcolor{keyword}{enum} \{}
\DoxyCodeLine{65         non, viewport, camera, shader, buffer,}
\DoxyCodeLine{66     \};}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \mbox{\hyperlink{class_renderer}{\string~Renderer}}();}
\DoxyCodeLine{69     IGL\_INLINE \textcolor{keywordtype}{void} draw( GLFWwindow* window);}
\DoxyCodeLine{70 }
\DoxyCodeLine{71     \textcolor{comment}{//IGL\_INLINE bool key\_pressed(unsigned int unicode\_key, int modifiers);}}
\DoxyCodeLine{72 }
\DoxyCodeLine{73         \textcolor{comment}{// Returns **true** if action should be cancelled.}}
\DoxyCodeLine{74     std::function<bool(GLFWwindow* window)> callback\_init;}
\DoxyCodeLine{75     std::function<bool(GLFWwindow* window)> callback\_pre\_draw;}
\DoxyCodeLine{76     std::function<bool(GLFWwindow* window)> callback\_post\_draw;}
\DoxyCodeLine{77     std::function<bool(GLFWwindow* window, \textcolor{keywordtype}{int} button, \textcolor{keywordtype}{int} modifier)> callback\_mouse\_down;}
\DoxyCodeLine{78     std::function<bool(GLFWwindow* window, \textcolor{keywordtype}{int} button, \textcolor{keywordtype}{int} modifier)> callback\_mouse\_up;}
\DoxyCodeLine{79     std::function<bool(GLFWwindow* window, \textcolor{keywordtype}{int} mouse\_x, \textcolor{keywordtype}{int} mouse\_y)> callback\_mouse\_move;}
\DoxyCodeLine{80     std::function<bool(GLFWwindow* window, \textcolor{keywordtype}{float} delta\_y)> callback\_mouse\_scroll;}
\DoxyCodeLine{81     std::function<bool(GLFWwindow* window, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} key, \textcolor{keywordtype}{int} modifiers)> callback\_key\_pressed;}
\DoxyCodeLine{82     std::function<bool(GLFWwindow* window, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} h)> callback\_post\_resize;}
\DoxyCodeLine{83     \textcolor{comment}{// THESE SHOULD BE DEPRECATED:}}
\DoxyCodeLine{84     std::function<bool(GLFWwindow* window, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} key, \textcolor{keywordtype}{int} modifiers)> callback\_key\_down;}
\DoxyCodeLine{85     std::function<bool(GLFWwindow* window, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} key, \textcolor{keywordtype}{int} modifiers)> callback\_key\_up;}
\DoxyCodeLine{86     \textcolor{comment}{// Pointers to per-\/callback data}}
\DoxyCodeLine{87     \textcolor{keywordtype}{void}* callback\_init\_data;}
\DoxyCodeLine{88     \textcolor{keywordtype}{void}* callback\_pre\_draw\_data;}
\DoxyCodeLine{89     \textcolor{keywordtype}{void}* callback\_post\_draw\_data;}
\DoxyCodeLine{90     \textcolor{keywordtype}{void}* callback\_mouse\_down\_data;}
\DoxyCodeLine{91     \textcolor{keywordtype}{void}* callback\_mouse\_up\_data;}
\DoxyCodeLine{92     \textcolor{keywordtype}{void}* callback\_mouse\_move\_data;}
\DoxyCodeLine{93     \textcolor{keywordtype}{void}* callback\_mouse\_scroll\_data;}
\DoxyCodeLine{94     \textcolor{keywordtype}{void}* callback\_key\_pressed\_data;}
\DoxyCodeLine{95     \textcolor{keywordtype}{void}* callback\_key\_down\_data;}
\DoxyCodeLine{96     \textcolor{keywordtype}{void}* callback\_key\_up\_data;}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \textcolor{comment}{// Callbacks}}
\DoxyCodeLine{99 \textcolor{comment}{//   double Picking(double x, double y);}}
\DoxyCodeLine{100      \textcolor{keyword}{inline} \textcolor{keywordtype}{void} Animate() \{ scn-\/>Animate(); \};}
\DoxyCodeLine{101     IGL\_INLINE \textcolor{keywordtype}{bool} key\_pressed(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} unicode\_key, \textcolor{keywordtype}{int} modifier);}
\DoxyCodeLine{102     IGL\_INLINE \textcolor{keywordtype}{void} resize(GLFWwindow* window,\textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} h); \textcolor{comment}{// explicitly set window size}}
\DoxyCodeLine{103     IGL\_INLINE \textcolor{keywordtype}{void} post\_resize(GLFWwindow* window, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} h); \textcolor{comment}{// external resize due to user interaction}}
\DoxyCodeLine{104     \textcolor{keywordtype}{void} SetScene(\mbox{\hyperlink{classigl_1_1opengl_1_1glfw_1_1_viewer}{igl::opengl::glfw::Viewer}}* scn);}
\DoxyCodeLine{105     \textcolor{keywordtype}{void} UpdatePosition(\textcolor{keywordtype}{double} xpos, \textcolor{keywordtype}{double} ypos);}
\DoxyCodeLine{106     \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1opengl_1_1glfw_1_1_viewer}{igl::opengl::glfw::Viewer}}* GetScene() \{}
\DoxyCodeLine{107         \textcolor{keywordflow}{return} scn;}
\DoxyCodeLine{108     \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{110     \textcolor{keywordtype}{void} TranslateCamera(Eigen::Vector3f amt);}
\DoxyCodeLine{111 }
\DoxyCodeLine{112     \textcolor{keywordtype}{float} UpdatePosition(\textcolor{keywordtype}{float} xpos, \textcolor{keywordtype}{float} ypos);}
\DoxyCodeLine{113 }
\DoxyCodeLine{114     \textcolor{keywordtype}{void} UpdatePress(\textcolor{keywordtype}{float} xpos, \textcolor{keywordtype}{float} ypos);}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{keywordtype}{void} AddCamera(\textcolor{keyword}{const} Eigen::Vector3d \&pos, \textcolor{keywordtype}{float} fov, \textcolor{keywordtype}{float} relationWH, \textcolor{keywordtype}{float} zNear, \textcolor{keywordtype}{float} zFar,}
\DoxyCodeLine{117                    \textcolor{keywordtype}{int} infoIndx = -\/1);}
\DoxyCodeLine{118 }
\DoxyCodeLine{119     \textcolor{keywordtype}{void} AddViewport(\textcolor{keywordtype}{int} left, \textcolor{keywordtype}{int} bottom, \textcolor{keywordtype}{int} width, \textcolor{keywordtype}{int} height);}
\DoxyCodeLine{120 }
\DoxyCodeLine{121     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} AddBuffer(\textcolor{keywordtype}{int} infoIndx);}
\DoxyCodeLine{122 }
\DoxyCodeLine{123     \textcolor{comment}{//int Create2Dmaterial(int infoIndx, int code);}}
\DoxyCodeLine{124 }
\DoxyCodeLine{125     \textcolor{keywordtype}{void} AddDraw(\textcolor{keywordtype}{int} viewportIndx, \textcolor{keywordtype}{int} cameraIndx, \textcolor{keywordtype}{int} shaderIndx, \textcolor{keywordtype}{int} buffIndx, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} flags);}
\DoxyCodeLine{126 }
\DoxyCodeLine{127     \textcolor{keywordtype}{void} CopyDraw(\textcolor{keywordtype}{int} infoIndx, \textcolor{keywordtype}{int} property, \textcolor{keywordtype}{int} indx);}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \textcolor{keywordtype}{void} SetViewport(\textcolor{keywordtype}{int} left, \textcolor{keywordtype}{int} bottom, \textcolor{keywordtype}{int} width, \textcolor{keywordtype}{int} height, \textcolor{keywordtype}{int} indx);}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} BindViewport2D(\textcolor{keywordtype}{int} indx) \{ drawInfos[indx]-\/>SetFlags(is2D); \}}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \textcolor{keywordtype}{void} MoveCamera(\textcolor{keywordtype}{int} cameraIndx, \textcolor{keywordtype}{int} type, \textcolor{keywordtype}{float} amt);}
\DoxyCodeLine{134 }
\DoxyCodeLine{135     \textcolor{keywordtype}{bool} Picking(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y);}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     \textcolor{keywordtype}{void} OutLine();}
\DoxyCodeLine{138 }
\DoxyCodeLine{139     \textcolor{keywordtype}{void} PickMany(\textcolor{keywordtype}{int} viewportIndx);}
\DoxyCodeLine{140 }
\DoxyCodeLine{141     \textcolor{keywordtype}{void} MouseProccessing(\textcolor{keywordtype}{int} button, \textcolor{keywordtype}{int} mode = 0, \textcolor{keywordtype}{int} viewportIndx = 0);}
\DoxyCodeLine{142 }
\DoxyCodeLine{143     \textcolor{keyword}{inline} \textcolor{keywordtype}{float} GetNear(\textcolor{keywordtype}{int} cameraIndx) \{ \textcolor{keywordflow}{return} cameras[cameraIndx]-\/>GetNear(); \}}
\DoxyCodeLine{144 }
\DoxyCodeLine{145     \textcolor{keyword}{inline} \textcolor{keywordtype}{float} GetFar(\textcolor{keywordtype}{int} cameraIndx) \{ \textcolor{keywordflow}{return} cameras[cameraIndx]-\/>GetFar(); \}}
\DoxyCodeLine{146 }
\DoxyCodeLine{147     \textcolor{keyword}{inline} \textcolor{keywordtype}{float} GetAngle(\textcolor{keywordtype}{int} cameraIndx) \{ \textcolor{keywordflow}{return} cameras[cameraIndx]-\/>GetAngle(); \}}
\DoxyCodeLine{148 }
\DoxyCodeLine{149     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} SetDrawFlag(\textcolor{keywordtype}{int} infoIndx, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} flag) \{ drawInfos[infoIndx]-\/>SetFlags(flag); \}}
\DoxyCodeLine{150 }
\DoxyCodeLine{151     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} ClearDrawFlag(\textcolor{keywordtype}{int} infoIndx, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} flag) \{ drawInfos[infoIndx]-\/>ClearFlags(flag); \}}
\DoxyCodeLine{152 }
\DoxyCodeLine{153     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} Pressed() \{ isPressed = !isPressed; \}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} IsPressed()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} isPressed; \}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} FreeShapes(\textcolor{keywordtype}{int} viewportIndx) \{ scn-\/>ClearPickedShapes(viewportIndx); \};}
\DoxyCodeLine{158 }
\DoxyCodeLine{159     \textcolor{keywordtype}{bool} CheckViewport(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y, \textcolor{keywordtype}{int} viewportIndx);}
\DoxyCodeLine{160 }
\DoxyCodeLine{161     \textcolor{keywordtype}{bool} UpdateViewport(\textcolor{keywordtype}{int} viewport);}
\DoxyCodeLine{162 }
\DoxyCodeLine{163     \textcolor{keyword}{inline} \textcolor{keywordtype}{int} GetViewportsSize() \{ \textcolor{keywordflow}{return} viewports.size(); \}}
\DoxyCodeLine{164 }
\DoxyCodeLine{165     \textcolor{keywordtype}{float} CalcMoveCoeff(\textcolor{keywordtype}{int} cameraIndx, \textcolor{keywordtype}{int} width);}
\DoxyCodeLine{166 }
\DoxyCodeLine{167     \textcolor{comment}{//void SetBuffers();}}
\DoxyCodeLine{168 }
\DoxyCodeLine{169     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} UpdateZpos(\textcolor{keywordtype}{int} ypos) \{ zrel = ypos; \}}
\DoxyCodeLine{170 }
\DoxyCodeLine{171     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} ClearPickedShapes(\textcolor{keywordtype}{int} viewportIndx) \{}
\DoxyCodeLine{172         scn-\/>ClearPickedShapes(viewportIndx);}
\DoxyCodeLine{173         isMany = \textcolor{keyword}{false};}
\DoxyCodeLine{174     \}}
\DoxyCodeLine{175 }
\DoxyCodeLine{176     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} UnPick(\textcolor{keywordtype}{int} viewportIndx) \{}
\DoxyCodeLine{177         isPicked = \textcolor{keyword}{false};}
\DoxyCodeLine{178         scn-\/>ClearPickedShapes(viewportIndx);}
\DoxyCodeLine{179     \}}
\DoxyCodeLine{180     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} IsPicked() \{ \textcolor{keywordflow}{return} isPicked; \}}
\DoxyCodeLine{181     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} IsMany()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} isMany; \}}
\DoxyCodeLine{182     \textcolor{keywordtype}{void} Init(\mbox{\hyperlink{classigl_1_1opengl_1_1glfw_1_1_viewer}{igl::opengl::glfw::Viewer}} *scene, std::list<int> xViewport, std::list<int> yViewport, \textcolor{keywordtype}{int} pickingBits,\mbox{\hyperlink{classigl_1_1opengl_1_1glfw_1_1imgui_1_1_im_gui_menu}{igl::opengl::glfw::imgui::ImGuiMenu}} *\_menu);}
\DoxyCodeLine{183 }
\DoxyCodeLine{184 }
\DoxyCodeLine{185 \textcolor{keyword}{private}:}
\DoxyCodeLine{186     \textcolor{comment}{// Stores all the viewing options}}
\DoxyCodeLine{187 \textcolor{comment}{//    std::vector<igl::opengl::ViewerCore> core\_list;}}
\DoxyCodeLine{188     std::vector<igl::opengl::Camera*> cameras;}
\DoxyCodeLine{189     \mbox{\hyperlink{classigl_1_1opengl_1_1glfw_1_1_viewer}{igl::opengl::glfw::Viewer}}* scn;}
\DoxyCodeLine{190     std::vector<Eigen::Vector4i> viewports;}
\DoxyCodeLine{191     std::vector<DrawInfo *> drawInfos;}
\DoxyCodeLine{192     std::vector<igl::opengl::DrawBuffer*> buffers;}
\DoxyCodeLine{193     \textcolor{keywordtype}{size\_t} selected\_core\_index;}
\DoxyCodeLine{194     \textcolor{keywordtype}{int} next\_core\_id;}
\DoxyCodeLine{195     \textcolor{keywordtype}{int} xold, yold, xrel, yrel, zrel;}
\DoxyCodeLine{196     \textcolor{keywordtype}{int} maxPixX, maxPixY;}
\DoxyCodeLine{197     \textcolor{keywordtype}{int} xWhenPress, yWhenPress;}
\DoxyCodeLine{198     \textcolor{keywordtype}{bool} isMany;}
\DoxyCodeLine{199     \textcolor{keywordtype}{bool} isPicked;}
\DoxyCodeLine{200     \textcolor{keywordtype}{int} materialIndx2D;}
\DoxyCodeLine{201     \textcolor{keywordtype}{bool} isPressed;}
\DoxyCodeLine{202     \textcolor{keywordtype}{int} currentViewport;}
\DoxyCodeLine{203     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} next\_property\_id = 1;}
\DoxyCodeLine{204     \textcolor{keywordtype}{float} highdpi;}
\DoxyCodeLine{205     \textcolor{keywordtype}{float} depth;}
\DoxyCodeLine{206     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} left\_view, right\_view;}
\DoxyCodeLine{207     \textcolor{keywordtype}{double} doubleVariable;}
\DoxyCodeLine{208     \mbox{\hyperlink{classigl_1_1opengl_1_1glfw_1_1imgui_1_1_im_gui_menu}{igl::opengl::glfw::imgui::ImGuiMenu}}* menu;}
\DoxyCodeLine{209     \textcolor{keywordtype}{double} z;}
\DoxyCodeLine{210 }
\DoxyCodeLine{211     \textcolor{keywordtype}{void} draw\_by\_info(\textcolor{keywordtype}{int} info\_index = 1);}
\DoxyCodeLine{212 }
\DoxyCodeLine{213     \textcolor{keywordtype}{void} ActionDraw(\textcolor{keywordtype}{int} viewportIndx);}
\DoxyCodeLine{214 }
\DoxyCodeLine{215     \textcolor{keywordtype}{void} Clear(\textcolor{keywordtype}{float} r, \textcolor{keywordtype}{float} g, \textcolor{keywordtype}{float} b, \textcolor{keywordtype}{float} a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} flags);}
\DoxyCodeLine{216 }
\DoxyCodeLine{217     \textcolor{keywordtype}{void} SwapDrawInfo(\textcolor{keywordtype}{int} indx1, \textcolor{keywordtype}{int} indx2);}
\DoxyCodeLine{218 \};}
\DoxyCodeLine{219 }

\end{DoxyCode}
