\hypertarget{arap_8h_source}{}\doxysection{arap.\+h}
\label{arap_8h_source}\index{igl/arap.h@{igl/arap.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// This file is part of libigl, a simple c++ geometry processing library.}}
\DoxyCodeLine{2 \textcolor{comment}{// }}
\DoxyCodeLine{3 \textcolor{comment}{// Copyright (C) 2013 Alec Jacobson <alecjacobson@gmail.com>}}
\DoxyCodeLine{4 \textcolor{comment}{// }}
\DoxyCodeLine{5 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla Public License }}
\DoxyCodeLine{6 \textcolor{comment}{// v. 2.0. If a copy of the MPL was not distributed with this file, You can }}
\DoxyCodeLine{7 \textcolor{comment}{// obtain one at http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef IGL\_ARAP\_H}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define IGL\_ARAP\_H}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}igl\_inline.h"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}min\_quad\_with\_fixed.h"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}ARAPEnergyType.h"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <Eigen/Core>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <Eigen/Sparse>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{keyword}{namespace }igl}
\DoxyCodeLine{17 \{}
\DoxyCodeLine{18   \textcolor{keyword}{struct }\mbox{\hyperlink{structigl_1_1_a_r_a_p_data}{ARAPData}}}
\DoxyCodeLine{19   \{}
\DoxyCodeLine{20     \textcolor{comment}{// n  \#V}}
\DoxyCodeLine{21     \textcolor{comment}{// G  \#V list of group indices (1 to k) for each vertex, such that vertex i}}
\DoxyCodeLine{22     \textcolor{comment}{//    is assigned to group G(i)}}
\DoxyCodeLine{23     \textcolor{comment}{// energy  type of energy to use}}
\DoxyCodeLine{24     \textcolor{comment}{// with\_dynamics  whether using dynamics (need to call arap\_precomputation}}
\DoxyCodeLine{25     \textcolor{comment}{//   after changing)}}
\DoxyCodeLine{26     \textcolor{comment}{// f\_ext  \#V by dim list of external forces}}
\DoxyCodeLine{27     \textcolor{comment}{// vel  \#V by dim list of velocities}}
\DoxyCodeLine{28     \textcolor{comment}{// h  dynamics time step}}
\DoxyCodeLine{29     \textcolor{comment}{// ym  \string~Young's modulus smaller is softer, larger is more rigid/stiff}}
\DoxyCodeLine{30     \textcolor{comment}{// max\_iter  maximum inner iterations}}
\DoxyCodeLine{31     \textcolor{comment}{// K  rhs pre-\/multiplier}}
\DoxyCodeLine{32     \textcolor{comment}{// M  mass matrix}}
\DoxyCodeLine{33     \textcolor{comment}{// solver\_data  quadratic solver data}}
\DoxyCodeLine{34     \textcolor{comment}{// b  list of boundary indices into V}}
\DoxyCodeLine{35     \textcolor{comment}{// dim  dimension being used for solving}}
\DoxyCodeLine{36     \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{37     Eigen::VectorXi G;}
\DoxyCodeLine{38     ARAPEnergyType energy;}
\DoxyCodeLine{39     \textcolor{keywordtype}{bool} with\_dynamics;}
\DoxyCodeLine{40     Eigen::MatrixXd f\_ext,vel;}
\DoxyCodeLine{41     \textcolor{keywordtype}{double} h;}
\DoxyCodeLine{42     \textcolor{keywordtype}{double} ym;}
\DoxyCodeLine{43     \textcolor{keywordtype}{int} max\_iter;}
\DoxyCodeLine{44     Eigen::SparseMatrix<double> K,M;}
\DoxyCodeLine{45     Eigen::SparseMatrix<double> CSM;}
\DoxyCodeLine{46     \mbox{\hyperlink{structigl_1_1min__quad__with__fixed__data}{min\_quad\_with\_fixed\_data<double>}} solver\_data;}
\DoxyCodeLine{47     Eigen::VectorXi b;}
\DoxyCodeLine{48     \textcolor{keywordtype}{int} dim;}
\DoxyCodeLine{49       \mbox{\hyperlink{structigl_1_1_a_r_a_p_data}{ARAPData}}():}
\DoxyCodeLine{50         n(0),}
\DoxyCodeLine{51         G(),}
\DoxyCodeLine{52         energy(ARAP\_ENERGY\_TYPE\_DEFAULT),}
\DoxyCodeLine{53         with\_dynamics(\textcolor{keyword}{false}),}
\DoxyCodeLine{54         f\_ext(),}
\DoxyCodeLine{55         h(1),}
\DoxyCodeLine{56         ym(1),}
\DoxyCodeLine{57         max\_iter(10),}
\DoxyCodeLine{58         K(),}
\DoxyCodeLine{59         CSM(),}
\DoxyCodeLine{60         solver\_data(),}
\DoxyCodeLine{61         b(),}
\DoxyCodeLine{62         dim(-\/1) \textcolor{comment}{// force this to be set by \_precomputation}}
\DoxyCodeLine{63     \{}
\DoxyCodeLine{64     \};}
\DoxyCodeLine{65   \};}
\DoxyCodeLine{66   }
\DoxyCodeLine{67   \textcolor{comment}{// Compute necessary information to start using an ARAP deformation}}
\DoxyCodeLine{68   \textcolor{comment}{//}}
\DoxyCodeLine{69   \textcolor{comment}{// Inputs:}}
\DoxyCodeLine{70   \textcolor{comment}{//   V  \#V by dim list of mesh positions}}
\DoxyCodeLine{71   \textcolor{comment}{//   F  \#F by simplex-\/size list of triangle|tet indices into V}}
\DoxyCodeLine{72   \textcolor{comment}{//   dim  dimension being used at solve time. For deformation usually dim =}}
\DoxyCodeLine{73   \textcolor{comment}{//     V.cols(), for surface parameterization V.cols() = 3 and dim = 2}}
\DoxyCodeLine{74   \textcolor{comment}{//   b  \#b list of "{}boundary"{} fixed vertex indices into V}}
\DoxyCodeLine{75   \textcolor{comment}{// Outputs:}}
\DoxyCodeLine{76   \textcolor{comment}{//   data  struct containing necessary precomputation}}
\DoxyCodeLine{77   \textcolor{keyword}{template} <}
\DoxyCodeLine{78     \textcolor{keyword}{typename} DerivedV,}
\DoxyCodeLine{79     \textcolor{keyword}{typename} DerivedF,}
\DoxyCodeLine{80     \textcolor{keyword}{typename} Derivedb>}
\DoxyCodeLine{81   IGL\_INLINE \textcolor{keywordtype}{bool} arap\_precomputation(}
\DoxyCodeLine{82     \textcolor{keyword}{const} Eigen::MatrixBase<DerivedV> \& V,}
\DoxyCodeLine{83     \textcolor{keyword}{const} Eigen::MatrixBase<DerivedF> \& F,}
\DoxyCodeLine{84     \textcolor{keyword}{const} \textcolor{keywordtype}{int} dim,}
\DoxyCodeLine{85     \textcolor{keyword}{const} Eigen::MatrixBase<Derivedb> \& b,}
\DoxyCodeLine{86     \mbox{\hyperlink{structigl_1_1_a_r_a_p_data}{ARAPData}} \& data);}
\DoxyCodeLine{87   \textcolor{comment}{// Inputs:}}
\DoxyCodeLine{88   \textcolor{comment}{//   bc  \#b by dim list of boundary conditions}}
\DoxyCodeLine{89   \textcolor{comment}{//   data  struct containing necessary precomputation and parameters}}
\DoxyCodeLine{90   \textcolor{comment}{//   U  \#V by dim initial guess}}
\DoxyCodeLine{91   \textcolor{comment}{//}}
\DoxyCodeLine{92   \textcolor{comment}{//   NOTE: While the libigl guidelines require outputs to be of type }}
\DoxyCodeLine{93   \textcolor{comment}{//   PlainObjectBase so that the user does not need to worry about allocating}}
\DoxyCodeLine{94   \textcolor{comment}{//   memory for the output, in this case, the user is required to give an initial}}
\DoxyCodeLine{95   \textcolor{comment}{//   guess and hence fix the size of the problem domain.}}
\DoxyCodeLine{96   \textcolor{comment}{//   Taking a reference to MatrixBase in this case thus allows the user to provide e.g.}}
\DoxyCodeLine{97   \textcolor{comment}{//   a map to the position data, allowing seamless interoperability with user-\/defined}}
\DoxyCodeLine{98   \textcolor{comment}{//   datastructures without requiring a copy.}}
\DoxyCodeLine{99   \textcolor{keyword}{template} <}
\DoxyCodeLine{100     \textcolor{keyword}{typename} Derivedbc,}
\DoxyCodeLine{101     \textcolor{keyword}{typename} DerivedU>}
\DoxyCodeLine{102   IGL\_INLINE \textcolor{keywordtype}{bool} arap\_solve(}
\DoxyCodeLine{103     \textcolor{keyword}{const} Eigen::MatrixBase<Derivedbc> \& bc,}
\DoxyCodeLine{104     \mbox{\hyperlink{structigl_1_1_a_r_a_p_data}{ARAPData}} \& data,}
\DoxyCodeLine{105     Eigen::MatrixBase<DerivedU> \& U);}
\DoxyCodeLine{106 \};}
\DoxyCodeLine{107 }
\DoxyCodeLine{108 \textcolor{preprocessor}{\#ifndef IGL\_STATIC\_LIBRARY}}
\DoxyCodeLine{109 \textcolor{preprocessor}{\#include "{}arap.cpp"{}}}
\DoxyCodeLine{110 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{111 }
\DoxyCodeLine{112 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
