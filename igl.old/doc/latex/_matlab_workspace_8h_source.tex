\hypertarget{_matlab_workspace_8h_source}{}\doxysection{Matlab\+Workspace.\+h}
\label{_matlab_workspace_8h_source}\index{igl/matlab/MatlabWorkspace.h@{igl/matlab/MatlabWorkspace.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// This file is part of libigl, a simple c++ geometry processing library.}}
\DoxyCodeLine{2 \textcolor{comment}{// }}
\DoxyCodeLine{3 \textcolor{comment}{// Copyright (C) 2013 Alec Jacobson <alecjacobson@gmail.com>}}
\DoxyCodeLine{4 \textcolor{comment}{// }}
\DoxyCodeLine{5 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla Public License }}
\DoxyCodeLine{6 \textcolor{comment}{// v. 2.0. If a copy of the MPL was not distributed with this file, You can }}
\DoxyCodeLine{7 \textcolor{comment}{// obtain one at http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef IGL\_MATLAB\_MATLAB\_WORKSPACE\_H}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define IGL\_MATLAB\_MATLAB\_WORKSPACE\_H}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <Eigen/Dense>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <Eigen/Sparse>}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <mat.h>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{namespace }igl}
\DoxyCodeLine{20 \{}
\DoxyCodeLine{21   \textcolor{keyword}{namespace }matlab}
\DoxyCodeLine{22   \{}
\DoxyCodeLine{23     \textcolor{comment}{// It would be really great to replicate this for a simple XML-\/based}}
\DoxyCodeLine{24     \textcolor{comment}{// workspace.}}
\DoxyCodeLine{25     \textcolor{comment}{//}}
\DoxyCodeLine{26     \textcolor{comment}{// Class which contains data of a matlab workspace which can be written to a}}
\DoxyCodeLine{27     \textcolor{comment}{// .mat file and loaded from matlab}}
\DoxyCodeLine{28     \textcolor{comment}{// }}
\DoxyCodeLine{29     \textcolor{comment}{// This depends on matlab at compile time (though it shouldn't necessarily}}
\DoxyCodeLine{30     \textcolor{comment}{// have to) but it does not depend on running the matlab engine at run-\/time.}}
\DoxyCodeLine{31     \textcolor{comment}{//}}
\DoxyCodeLine{32     \textcolor{comment}{// Known bugs: Treats all matrices as doubles (this may actually be desired}}
\DoxyCodeLine{33     \textcolor{comment}{// for some "{}index"{} matrices since matlab's sparse command takes doubles}}
\DoxyCodeLine{34     \textcolor{comment}{// rather than int class matrices). It is of course not desired when dealing}}
\DoxyCodeLine{35     \textcolor{comment}{// with logicals or uint's for images.}}
\DoxyCodeLine{36     \textcolor{keyword}{class }\mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}}
\DoxyCodeLine{37     \{}
\DoxyCodeLine{38       \textcolor{keyword}{private}:}
\DoxyCodeLine{39         \textcolor{comment}{// KNOWN BUG: Why not use a map? Any reason to allow duplicate names?}}
\DoxyCodeLine{40         \textcolor{comment}{//}}
\DoxyCodeLine{41         \textcolor{comment}{// List of names}}
\DoxyCodeLine{42         std::vector<std::string> names;}
\DoxyCodeLine{43         \textcolor{comment}{// List of data pointers}}
\DoxyCodeLine{44         std::vector<mxArray*> data;}
\DoxyCodeLine{45       \textcolor{keyword}{public}:}
\DoxyCodeLine{46         \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}();}
\DoxyCodeLine{47         \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{\string~MatlabWorkspace}}();}
\DoxyCodeLine{48         \textcolor{comment}{// Clear names and data of variables in workspace}}
\DoxyCodeLine{49         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} clear();}
\DoxyCodeLine{50         \textcolor{comment}{// Save current list of variables}}
\DoxyCodeLine{51         \textcolor{comment}{//}}
\DoxyCodeLine{52         \textcolor{comment}{// Inputs:}}
\DoxyCodeLine{53         \textcolor{comment}{//   path  path to .mat file}}
\DoxyCodeLine{54         \textcolor{comment}{// Returns true on success, false on failure}}
\DoxyCodeLine{55         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} write(\textcolor{keyword}{const} std::string \& path) \textcolor{keyword}{const};}
\DoxyCodeLine{56         \textcolor{comment}{// Load list of variables from .mat file}}
\DoxyCodeLine{57         \textcolor{comment}{//}}
\DoxyCodeLine{58         \textcolor{comment}{// Inputs:}}
\DoxyCodeLine{59         \textcolor{comment}{//   path  path to .mat file}}
\DoxyCodeLine{60         \textcolor{comment}{// Returns true on success, false on failure}}
\DoxyCodeLine{61         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} read(\textcolor{keyword}{const} std::string \& path);}
\DoxyCodeLine{62         \textcolor{comment}{// Assign data to a variable name in the workspace}}
\DoxyCodeLine{63         \textcolor{comment}{//}}
\DoxyCodeLine{64         \textcolor{comment}{// Template: }}
\DoxyCodeLine{65         \textcolor{comment}{//   DerivedM  eigen matrix (e.g. MatrixXd)}}
\DoxyCodeLine{66         \textcolor{comment}{// Inputs:}}
\DoxyCodeLine{67         \textcolor{comment}{//   M  data (usually a matrix)}}
\DoxyCodeLine{68         \textcolor{comment}{//   name  variable name to save into work space}}
\DoxyCodeLine{69         \textcolor{comment}{// Returns true on success, false on failure}}
\DoxyCodeLine{70         \textcolor{comment}{//}}
\DoxyCodeLine{71         \textcolor{comment}{// Known Bugs: Assumes Eigen is using column major ordering}}
\DoxyCodeLine{72         \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedM>}
\DoxyCodeLine{73         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save(}
\DoxyCodeLine{74           \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedM>\& M,}
\DoxyCodeLine{75           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{76         \textcolor{comment}{// Template:}}
\DoxyCodeLine{77         \textcolor{comment}{//   MT  sparse matrix type (e.g. double)}}
\DoxyCodeLine{78         \textcolor{keyword}{template} <\textcolor{keyword}{typename} MT>}
\DoxyCodeLine{79         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save(}
\DoxyCodeLine{80           \textcolor{keyword}{const} Eigen::SparseMatrix<MT>\& M,}
\DoxyCodeLine{81           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{82         \textcolor{comment}{// Templates:}}
\DoxyCodeLine{83         \textcolor{comment}{//   ScalarM  scalar type, e.g. double}}
\DoxyCodeLine{84         \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarM>}
\DoxyCodeLine{85         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save(}
\DoxyCodeLine{86           \textcolor{keyword}{const} std::vector<std::vector<ScalarM> > \& vM,}
\DoxyCodeLine{87           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{88         \textcolor{comment}{// Templates:}}
\DoxyCodeLine{89         \textcolor{comment}{//   ScalarV  scalar type, e.g. double}}
\DoxyCodeLine{90         \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarV>}
\DoxyCodeLine{91         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save(}
\DoxyCodeLine{92           \textcolor{keyword}{const} std::vector<ScalarV> \& vV,}
\DoxyCodeLine{93           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{94         \textcolor{comment}{// NOTE: Eigen stores quaternions coefficients as (i,j,k,1), but most of}}
\DoxyCodeLine{95         \textcolor{comment}{// our matlab code stores them as (1,i,j,k) This takes a quaternion and}}
\DoxyCodeLine{96         \textcolor{comment}{// saves it as a (1,i,j,k) row vector}}
\DoxyCodeLine{97         \textcolor{comment}{//}}
\DoxyCodeLine{98         \textcolor{comment}{// Templates:}}
\DoxyCodeLine{99         \textcolor{comment}{//   Q  quaternion type}}
\DoxyCodeLine{100         \textcolor{keyword}{template} <\textcolor{keyword}{typename} Q>}
\DoxyCodeLine{101         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save(}
\DoxyCodeLine{102           \textcolor{keyword}{const} Eigen::Quaternion<Q> \& q,}
\DoxyCodeLine{103           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{104         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save(}
\DoxyCodeLine{105           \textcolor{keyword}{const} \textcolor{keywordtype}{double} d,}
\DoxyCodeLine{106           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{107         \textcolor{comment}{// Same as save() but adds 1 to each element, useful for saving "{}index"{}}}
\DoxyCodeLine{108         \textcolor{comment}{// matrices like lists of faces or elements}}
\DoxyCodeLine{109         \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedM>}
\DoxyCodeLine{110         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save\_index(}
\DoxyCodeLine{111           \textcolor{keyword}{const} Eigen::DenseBase<DerivedM>\& M,}
\DoxyCodeLine{112           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{113         \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarM>}
\DoxyCodeLine{114         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save\_index(}
\DoxyCodeLine{115           \textcolor{keyword}{const} std::vector<std::vector<ScalarM> > \& vM,}
\DoxyCodeLine{116           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{117         \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarV>}
\DoxyCodeLine{118         \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{MatlabWorkspace}}\& save\_index(}
\DoxyCodeLine{119           \textcolor{keyword}{const} std::vector<ScalarV> \& vV,}
\DoxyCodeLine{120           \textcolor{keyword}{const} std::string \& name);}
\DoxyCodeLine{121         \textcolor{comment}{// Find a certain matrix by name.}}
\DoxyCodeLine{122         \textcolor{comment}{//}}
\DoxyCodeLine{123         \textcolor{comment}{// KNOWN BUG: Outputs the first found (not necessarily unique lists).}}
\DoxyCodeLine{124         \textcolor{comment}{//}}
\DoxyCodeLine{125         \textcolor{comment}{// Template: }}
\DoxyCodeLine{126         \textcolor{comment}{//   DerivedM  eigen matrix (e.g. MatrixXd)}}
\DoxyCodeLine{127         \textcolor{comment}{// Inputs:}}
\DoxyCodeLine{128         \textcolor{comment}{//   name  exact name of matrix as string}}
\DoxyCodeLine{129         \textcolor{comment}{// Outputs:}}
\DoxyCodeLine{130         \textcolor{comment}{//   M  matrix}}
\DoxyCodeLine{131         \textcolor{comment}{// Returns true only if found.}}
\DoxyCodeLine{132         \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedM>}
\DoxyCodeLine{133         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} find( }
\DoxyCodeLine{134           \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{135           Eigen::PlainObjectBase<DerivedM>\& M);}
\DoxyCodeLine{136         \textcolor{keyword}{template} <\textcolor{keyword}{typename} MT>}
\DoxyCodeLine{137         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} find( }
\DoxyCodeLine{138           \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{139           Eigen::SparseMatrix<MT>\& M);}
\DoxyCodeLine{140         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} find( }
\DoxyCodeLine{141           \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{142           \textcolor{keywordtype}{double} \& d);}
\DoxyCodeLine{143         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} find( }
\DoxyCodeLine{144           \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{145           \textcolor{keywordtype}{int} \& v);}
\DoxyCodeLine{146         \textcolor{comment}{// Subtracts 1 from all entries}}
\DoxyCodeLine{147         \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedM>}
\DoxyCodeLine{148         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} find\_index( }
\DoxyCodeLine{149           \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{150           Eigen::PlainObjectBase<DerivedM>\& M);}
\DoxyCodeLine{151     \};}
\DoxyCodeLine{152   \}}
\DoxyCodeLine{153 \}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155 \textcolor{comment}{// Implementation}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 \textcolor{comment}{// Be sure that this is not compiled into libigl.a}}
\DoxyCodeLine{158 \textcolor{comment}{// http://stackoverflow.com/a/3318993/148668}}
\DoxyCodeLine{159 }
\DoxyCodeLine{160 \textcolor{comment}{// IGL}}
\DoxyCodeLine{161 \textcolor{preprocessor}{\#include "{}igl/list\_to\_matrix.h"{}}}
\DoxyCodeLine{162 }
\DoxyCodeLine{163 \textcolor{comment}{// MATLAB}}
\DoxyCodeLine{164 \textcolor{preprocessor}{\#include "{}mat.h"{}}}
\DoxyCodeLine{165 }
\DoxyCodeLine{166 \textcolor{comment}{// STL}}
\DoxyCodeLine{167 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{168 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{169 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{170 }
\DoxyCodeLine{171 \textcolor{keyword}{inline} igl::matlab::MatlabWorkspace::MatlabWorkspace():}
\DoxyCodeLine{172   names(),}
\DoxyCodeLine{173   data()}
\DoxyCodeLine{174 \{}
\DoxyCodeLine{175 \}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177 \textcolor{keyword}{inline} igl::matlab::MatlabWorkspace::\string~MatlabWorkspace()}
\DoxyCodeLine{178 \{}
\DoxyCodeLine{179   \textcolor{comment}{// clean up data}}
\DoxyCodeLine{180   clear();}
\DoxyCodeLine{181 \}}
\DoxyCodeLine{182 }
\DoxyCodeLine{183 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} igl::matlab::MatlabWorkspace::clear()}
\DoxyCodeLine{184 \{}
\DoxyCodeLine{185   for\_each(data.begin(),data.end(),\&mxDestroyArray);}
\DoxyCodeLine{186   data.clear();}
\DoxyCodeLine{187   names.clear();}
\DoxyCodeLine{188 \}}
\DoxyCodeLine{189 }
\DoxyCodeLine{190 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} igl::matlab::MatlabWorkspace::write(\textcolor{keyword}{const} std::string \& path)\textcolor{keyword}{ const}}
\DoxyCodeLine{191 \textcolor{keyword}{}\{}
\DoxyCodeLine{192   \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{193   MATFile * mat\_file = matOpen(path.c\_str(), \textcolor{stringliteral}{"{}w"{}});}
\DoxyCodeLine{194   \textcolor{keywordflow}{if}(mat\_file == NULL)}
\DoxyCodeLine{195   \{}
\DoxyCodeLine{196     fprintf(stderr,\textcolor{stringliteral}{"{}Error opening file \%s\(\backslash\)n"{}},path.c\_str());}
\DoxyCodeLine{197     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{198   \}}
\DoxyCodeLine{199   assert(names.size() == data.size());}
\DoxyCodeLine{200   \textcolor{comment}{// loop over names and data}}
\DoxyCodeLine{201   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0;i < (int)names.size(); i++)}
\DoxyCodeLine{202   \{}
\DoxyCodeLine{203     \textcolor{comment}{// Put variable as LOCAL variable}}
\DoxyCodeLine{204     \textcolor{keywordtype}{int} status = matPutVariable(mat\_file,names[i].c\_str(), data[i]);}
\DoxyCodeLine{205     \textcolor{keywordflow}{if}(status != 0) }
\DoxyCodeLine{206     \{}
\DoxyCodeLine{207       cerr<<\textcolor{stringliteral}{"{}\string^MatlabWorkspace::save Error: matPutVariable ("{}}<<names[i]<<}
\DoxyCodeLine{208         \textcolor{stringliteral}{"{}) failed"{}}<<endl;}
\DoxyCodeLine{209       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{210     \} }
\DoxyCodeLine{211   \}}
\DoxyCodeLine{212   \textcolor{keywordflow}{if}(matClose(mat\_file) != 0)}
\DoxyCodeLine{213   \{}
\DoxyCodeLine{214     fprintf(stderr,\textcolor{stringliteral}{"{}Error closing file \%s\(\backslash\)n"{}},path.c\_str());}
\DoxyCodeLine{215     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{216   \}}
\DoxyCodeLine{217   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{218 \}}
\DoxyCodeLine{219 }
\DoxyCodeLine{220 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} igl::matlab::MatlabWorkspace::read(\textcolor{keyword}{const} std::string \& path)}
\DoxyCodeLine{221 \{}
\DoxyCodeLine{222   \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{223 }
\DoxyCodeLine{224   MATFile * mat\_file;}
\DoxyCodeLine{225 }
\DoxyCodeLine{226   mat\_file = matOpen(path.c\_str(), \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{227   \textcolor{keywordflow}{if} (mat\_file == NULL) }
\DoxyCodeLine{228   \{}
\DoxyCodeLine{229     cerr<<\textcolor{stringliteral}{"{}Error: failed to open "{}}<<path<<endl;}
\DoxyCodeLine{230     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{231   \}}
\DoxyCodeLine{232 }
\DoxyCodeLine{233   \textcolor{keywordtype}{int} ndir;}
\DoxyCodeLine{234   \textcolor{keyword}{const} \textcolor{keywordtype}{char} ** dir = (\textcolor{keyword}{const} \textcolor{keywordtype}{char} **)matGetDir(mat\_file, \&ndir);}
\DoxyCodeLine{235   \textcolor{keywordflow}{if} (dir == NULL) \{}
\DoxyCodeLine{236     cerr<<\textcolor{stringliteral}{"{}Error reading directory of file "{}}<< path<<endl;}
\DoxyCodeLine{237     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{238   \}}
\DoxyCodeLine{239   mxFree(dir);}
\DoxyCodeLine{240 }
\DoxyCodeLine{241   \textcolor{comment}{// Must close and reopen}}
\DoxyCodeLine{242   \textcolor{keywordflow}{if}(matClose(mat\_file) != 0)}
\DoxyCodeLine{243   \{}
\DoxyCodeLine{244     cerr<<\textcolor{stringliteral}{"{}Error: failed to close file "{}}<<path<<endl;}
\DoxyCodeLine{245     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{246   \}}
\DoxyCodeLine{247   mat\_file = matOpen(path.c\_str(), \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{248   \textcolor{keywordflow}{if} (mat\_file == NULL) }
\DoxyCodeLine{249   \{}
\DoxyCodeLine{250     cerr<<\textcolor{stringliteral}{"{}Error: failed to open "{}}<<path<<endl;}
\DoxyCodeLine{251     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{252   \}}
\DoxyCodeLine{253   }
\DoxyCodeLine{254 }
\DoxyCodeLine{255   \textcolor{comment}{/* Read in each array. */}}
\DoxyCodeLine{256   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<ndir; i++) }
\DoxyCodeLine{257   \{}
\DoxyCodeLine{258     \textcolor{keyword}{const} \textcolor{keywordtype}{char} * name;}
\DoxyCodeLine{259     mxArray * mx\_data = matGetNextVariable(mat\_file, \&name);}
\DoxyCodeLine{260     \textcolor{keywordflow}{if} (mx\_data == NULL) }
\DoxyCodeLine{261     \{}
\DoxyCodeLine{262       cerr<<\textcolor{stringliteral}{"{}Error: matGetNextVariable failed in "{}}<<path<<endl;}
\DoxyCodeLine{263       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{264     \} }
\DoxyCodeLine{265     \textcolor{keyword}{const} \textcolor{keywordtype}{int} dims = mxGetNumberOfDimensions(mx\_data);}
\DoxyCodeLine{266     assert(dims == 2);}
\DoxyCodeLine{267     \textcolor{keywordflow}{if}(dims != 2)}
\DoxyCodeLine{268     \{}
\DoxyCodeLine{269       fprintf(stderr,\textcolor{stringliteral}{"{}Variable '\%s' has \%d â‰  2 dimensions. Skipping\(\backslash\)n"{}},}
\DoxyCodeLine{270           name,dims);}
\DoxyCodeLine{271       mxDestroyArray(mx\_data);}
\DoxyCodeLine{272       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{273     \}}
\DoxyCodeLine{274     \textcolor{comment}{// don't destroy}}
\DoxyCodeLine{275     names.push\_back(name);}
\DoxyCodeLine{276     data.push\_back(mx\_data);}
\DoxyCodeLine{277   \}}
\DoxyCodeLine{278 }
\DoxyCodeLine{279   \textcolor{keywordflow}{if}(matClose(mat\_file) != 0)}
\DoxyCodeLine{280   \{}
\DoxyCodeLine{281     cerr<<\textcolor{stringliteral}{"{}Error: failed to close file "{}}<<path<<endl;}
\DoxyCodeLine{282     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{283   \}}
\DoxyCodeLine{284 }
\DoxyCodeLine{285   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{286 \}}
\DoxyCodeLine{287 }
\DoxyCodeLine{288 \textcolor{comment}{// Treat everything as a double}}
\DoxyCodeLine{289 \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedM>}
\DoxyCodeLine{290 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& igl::matlab::MatlabWorkspace::save(}
\DoxyCodeLine{291   \textcolor{keyword}{const} Eigen::PlainObjectBase<DerivedM>\& M,}
\DoxyCodeLine{292   \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{293 \{}
\DoxyCodeLine{294   \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{295   \textcolor{keyword}{const} \textcolor{keywordtype}{int} m = M.rows();}
\DoxyCodeLine{296   \textcolor{keyword}{const} \textcolor{keywordtype}{int} n = M.cols();}
\DoxyCodeLine{297   mxArray * mx\_data = mxCreateDoubleMatrix(m,n,mxREAL);}
\DoxyCodeLine{298   data.push\_back(mx\_data);}
\DoxyCodeLine{299   names.push\_back(name);}
\DoxyCodeLine{300   \textcolor{comment}{// Copy data immediately}}
\DoxyCodeLine{301   \textcolor{comment}{// Use Eigen's map and cast to copy}}
\DoxyCodeLine{302   Eigen::Map< Eigen::Matrix<double,Eigen::Dynamic,Eigen::Dynamic> > }
\DoxyCodeLine{303     map(mxGetPr(mx\_data),m,n);}
\DoxyCodeLine{304   map = M.template cast<double>();}
\DoxyCodeLine{305   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{306 \}}
\DoxyCodeLine{307 }
\DoxyCodeLine{308 \textcolor{comment}{// Treat everything as a double}}
\DoxyCodeLine{309 \textcolor{keyword}{template} <\textcolor{keyword}{typename} MT>}
\DoxyCodeLine{310 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& igl::matlab::MatlabWorkspace::save(}
\DoxyCodeLine{311   \textcolor{keyword}{const} Eigen::SparseMatrix<MT>\& M,}
\DoxyCodeLine{312   \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{313 \{}
\DoxyCodeLine{314   \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{315   \textcolor{keyword}{const} \textcolor{keywordtype}{int} m = M.rows();}
\DoxyCodeLine{316   \textcolor{keyword}{const} \textcolor{keywordtype}{int} n = M.cols();}
\DoxyCodeLine{317   \textcolor{comment}{// THIS WILL NOT WORK FOR ROW-\/MAJOR}}
\DoxyCodeLine{318   assert(n==M.outerSize());}
\DoxyCodeLine{319   \textcolor{keyword}{const} \textcolor{keywordtype}{int} nzmax = M.nonZeros();}
\DoxyCodeLine{320   mxArray * mx\_data = mxCreateSparse(m, n, nzmax, mxREAL);}
\DoxyCodeLine{321   data.push\_back(mx\_data);}
\DoxyCodeLine{322   names.push\_back(name);}
\DoxyCodeLine{323   \textcolor{comment}{// Copy data immediately}}
\DoxyCodeLine{324   \textcolor{keywordtype}{double} * pr = mxGetPr(mx\_data);}
\DoxyCodeLine{325   mwIndex * ir = mxGetIr(mx\_data);}
\DoxyCodeLine{326   mwIndex * jc = mxGetJc(mx\_data);}
\DoxyCodeLine{327 }
\DoxyCodeLine{328   \textcolor{comment}{// Iterate over outside}}
\DoxyCodeLine{329   \textcolor{keywordtype}{int} k = 0;}
\DoxyCodeLine{330   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0; j<M.outerSize();j++)}
\DoxyCodeLine{331   \{}
\DoxyCodeLine{332     jc[j] = k;}
\DoxyCodeLine{333     \textcolor{comment}{// Iterate over inside}}
\DoxyCodeLine{334     \textcolor{keywordflow}{for}(\textcolor{keyword}{typename} Eigen::SparseMatrix<MT>::InnerIterator it (M,j); it; ++it)}
\DoxyCodeLine{335     \{}
\DoxyCodeLine{336       pr[k] = it.value();}
\DoxyCodeLine{337       ir[k] = it.row();}
\DoxyCodeLine{338       k++;}
\DoxyCodeLine{339     \}}
\DoxyCodeLine{340   \}}
\DoxyCodeLine{341   jc[M.outerSize()] = k;}
\DoxyCodeLine{342 }
\DoxyCodeLine{343   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{344 \}}
\DoxyCodeLine{345 }
\DoxyCodeLine{346 \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarM>}
\DoxyCodeLine{347 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& igl::matlab::MatlabWorkspace::save(}
\DoxyCodeLine{348   \textcolor{keyword}{const} std::vector<std::vector<ScalarM> > \& vM,}
\DoxyCodeLine{349   \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{350 \{}
\DoxyCodeLine{351   Eigen::MatrixXd M;}
\DoxyCodeLine{352   list\_to\_matrix(vM,M);}
\DoxyCodeLine{353   \textcolor{keywordflow}{return} this-\/>save(M,name);}
\DoxyCodeLine{354 \}}
\DoxyCodeLine{355 }
\DoxyCodeLine{356 \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarV>}
\DoxyCodeLine{357 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& igl::matlab::MatlabWorkspace::save(}
\DoxyCodeLine{358   \textcolor{keyword}{const} std::vector<ScalarV> \& vV,}
\DoxyCodeLine{359   \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{360 \{}
\DoxyCodeLine{361   Eigen::MatrixXd V;}
\DoxyCodeLine{362   list\_to\_matrix(vV,V);}
\DoxyCodeLine{363   \textcolor{keywordflow}{return} this-\/>save(V,name);}
\DoxyCodeLine{364 \}}
\DoxyCodeLine{365 }
\DoxyCodeLine{366 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Q>}
\DoxyCodeLine{367 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& igl::matlab::MatlabWorkspace::save(}
\DoxyCodeLine{368   \textcolor{keyword}{const} Eigen::Quaternion<Q> \& q,}
\DoxyCodeLine{369   \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{370 \{}
\DoxyCodeLine{371   Eigen::Matrix<Q,1,4> qm;}
\DoxyCodeLine{372   qm(0,0) = q.w();}
\DoxyCodeLine{373   qm(0,1) = q.x();}
\DoxyCodeLine{374   qm(0,2) = q.y();}
\DoxyCodeLine{375   qm(0,3) = q.z();}
\DoxyCodeLine{376   \textcolor{keywordflow}{return} save(qm,name);}
\DoxyCodeLine{377 \}}
\DoxyCodeLine{378 }
\DoxyCodeLine{379 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& igl::matlab::MatlabWorkspace::save(}
\DoxyCodeLine{380   \textcolor{keyword}{const} \textcolor{keywordtype}{double} d,}
\DoxyCodeLine{381   \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{382 \{}
\DoxyCodeLine{383   Eigen::VectorXd v(1);}
\DoxyCodeLine{384   v(0) = d;}
\DoxyCodeLine{385   \textcolor{keywordflow}{return} save(v,name);}
\DoxyCodeLine{386 \}}
\DoxyCodeLine{387 }
\DoxyCodeLine{388 \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedM>}
\DoxyCodeLine{389 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& }
\DoxyCodeLine{390   igl::matlab::MatlabWorkspace::save\_index(}
\DoxyCodeLine{391     \textcolor{keyword}{const} Eigen::DenseBase<DerivedM>\& M,}
\DoxyCodeLine{392     \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{393 \{}
\DoxyCodeLine{394   DerivedM Mp1 = M;}
\DoxyCodeLine{395   Mp1.array() += 1;}
\DoxyCodeLine{396   \textcolor{keywordflow}{return} this-\/>save(Mp1,name);}
\DoxyCodeLine{397 \}}
\DoxyCodeLine{398 }
\DoxyCodeLine{399 \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarM>}
\DoxyCodeLine{400 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& igl::matlab::MatlabWorkspace::save\_index(}
\DoxyCodeLine{401   \textcolor{keyword}{const} std::vector<std::vector<ScalarM> > \& vM,}
\DoxyCodeLine{402   \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{403 \{}
\DoxyCodeLine{404   Eigen::MatrixXd M;}
\DoxyCodeLine{405   list\_to\_matrix(vM,M);}
\DoxyCodeLine{406   \textcolor{keywordflow}{return} this-\/>save\_index(M,name);}
\DoxyCodeLine{407 \}}
\DoxyCodeLine{408 }
\DoxyCodeLine{409 \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarV>}
\DoxyCodeLine{410 \textcolor{keyword}{inline} \mbox{\hyperlink{classigl_1_1matlab_1_1_matlab_workspace}{igl::matlab::MatlabWorkspace}}\& igl::matlab::MatlabWorkspace::save\_index(}
\DoxyCodeLine{411   \textcolor{keyword}{const} std::vector<ScalarV> \& vV,}
\DoxyCodeLine{412   \textcolor{keyword}{const} std::string \& name)}
\DoxyCodeLine{413 \{}
\DoxyCodeLine{414   Eigen::MatrixXd V;}
\DoxyCodeLine{415   list\_to\_matrix(vV,V);}
\DoxyCodeLine{416   \textcolor{keywordflow}{return} this-\/>save\_index(V,name);}
\DoxyCodeLine{417 \}}
\DoxyCodeLine{418 }
\DoxyCodeLine{419 \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedM>}
\DoxyCodeLine{420 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} igl::matlab::MatlabWorkspace::find( }
\DoxyCodeLine{421   \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{422   Eigen::PlainObjectBase<DerivedM>\& M)}
\DoxyCodeLine{423 \{}
\DoxyCodeLine{424   \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{425   \textcolor{keyword}{const} \textcolor{keywordtype}{int} i = std::find(names.begin(), names.end(), name)-\/names.begin();}
\DoxyCodeLine{426   \textcolor{keywordflow}{if}(i>=(\textcolor{keywordtype}{int})names.size())}
\DoxyCodeLine{427   \{}
\DoxyCodeLine{428     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{429   \}}
\DoxyCodeLine{430   assert(i<=(\textcolor{keywordtype}{int})data.size());}
\DoxyCodeLine{431   mxArray * mx\_data = data[i];}
\DoxyCodeLine{432   assert(!mxIsSparse(mx\_data));}
\DoxyCodeLine{433   assert(mxGetNumberOfDimensions(mx\_data) == 2);}
\DoxyCodeLine{434   \textcolor{comment}{//cout<<name<<"{}: "{}<<mxGetM(mx\_data)<<"{} "{}<<mxGetN(mx\_data)<<endl;}}
\DoxyCodeLine{435   \textcolor{keyword}{const} \textcolor{keywordtype}{int} m = mxGetM(mx\_data);}
\DoxyCodeLine{436   \textcolor{keyword}{const} \textcolor{keywordtype}{int} n = mxGetN(mx\_data);}
\DoxyCodeLine{437   \textcolor{comment}{// Handle vectors: in the sense that anything found becomes a column vector,}}
\DoxyCodeLine{438   \textcolor{comment}{// whether it was column vector, row vector or matrix}}
\DoxyCodeLine{439   \textcolor{keywordflow}{if}(DerivedM::IsVectorAtCompileTime)}
\DoxyCodeLine{440   \{}
\DoxyCodeLine{441     assert(m==1 || n==1 || (m==0 \&\& n==0));}
\DoxyCodeLine{442     M.resize(m*n,1);}
\DoxyCodeLine{443   \}\textcolor{keywordflow}{else}}
\DoxyCodeLine{444   \{}
\DoxyCodeLine{445     M.resize(m,n);}
\DoxyCodeLine{446   \}}
\DoxyCodeLine{447   assert(mxGetNumberOfElements(mx\_data) == M.size());}
\DoxyCodeLine{448   \textcolor{comment}{// Use Eigen's map and cast to copy}}
\DoxyCodeLine{449   M = Eigen::Map< Eigen::Matrix<double,Eigen::Dynamic,Eigen::Dynamic> > }
\DoxyCodeLine{450     (mxGetPr(mx\_data),M.rows(),M.cols()).cast<typename DerivedM::Scalar>();}
\DoxyCodeLine{451   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{452 \}}
\DoxyCodeLine{453 }
\DoxyCodeLine{454 \textcolor{keyword}{template} <\textcolor{keyword}{typename} MT>}
\DoxyCodeLine{455 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} igl::matlab::MatlabWorkspace::find( }
\DoxyCodeLine{456   \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{457   Eigen::SparseMatrix<MT>\& M)}
\DoxyCodeLine{458 \{}
\DoxyCodeLine{459   \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{460   \textcolor{keyword}{using namespace }Eigen;}
\DoxyCodeLine{461   \textcolor{keyword}{const} \textcolor{keywordtype}{int} i = std::find(names.begin(), names.end(), name)-\/names.begin();}
\DoxyCodeLine{462   \textcolor{keywordflow}{if}(i>=(\textcolor{keywordtype}{int})names.size())}
\DoxyCodeLine{463   \{}
\DoxyCodeLine{464     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{465   \}}
\DoxyCodeLine{466   assert(i<=(\textcolor{keywordtype}{int})data.size());}
\DoxyCodeLine{467   mxArray * mx\_data = data[i];}
\DoxyCodeLine{468   \textcolor{comment}{// Handle boring case where matrix is actually an empty dense matrix}}
\DoxyCodeLine{469   \textcolor{keywordflow}{if}(mxGetNumberOfElements(mx\_data) == 0)}
\DoxyCodeLine{470   \{}
\DoxyCodeLine{471     M.resize(0,0);}
\DoxyCodeLine{472     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{473   \}}
\DoxyCodeLine{474   assert(mxIsSparse(mx\_data));}
\DoxyCodeLine{475   assert(mxGetNumberOfDimensions(mx\_data) == 2);}
\DoxyCodeLine{476   \textcolor{comment}{//cout<<name<<"{}: "{}<<mxGetM(mx\_data)<<"{} "{}<<mxGetN(mx\_data)<<endl;}}
\DoxyCodeLine{477   \textcolor{keyword}{const} \textcolor{keywordtype}{int} m = mxGetM(mx\_data);}
\DoxyCodeLine{478   \textcolor{keyword}{const} \textcolor{keywordtype}{int} n = mxGetN(mx\_data);}
\DoxyCodeLine{479   \textcolor{comment}{// TODO: It should be possible to directly load the data into the sparse}}
\DoxyCodeLine{480   \textcolor{comment}{// matrix without going through the triplets}}
\DoxyCodeLine{481   \textcolor{comment}{// Copy data immediately}}
\DoxyCodeLine{482   \textcolor{keywordtype}{double} * pr = mxGetPr(mx\_data);}
\DoxyCodeLine{483   mwIndex * ir = mxGetIr(mx\_data);}
\DoxyCodeLine{484   mwIndex * jc = mxGetJc(mx\_data);}
\DoxyCodeLine{485   vector<Triplet<MT> > MIJV;}
\DoxyCodeLine{486   \textcolor{keyword}{const} \textcolor{keywordtype}{int} nnz = mxGetNzmax(mx\_data);}
\DoxyCodeLine{487   MIJV.reserve(nnz);}
\DoxyCodeLine{488   \textcolor{comment}{// Iterate over outside}}
\DoxyCodeLine{489   \textcolor{keywordtype}{int} k = 0;}
\DoxyCodeLine{490   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0; j<n;j++)}
\DoxyCodeLine{491   \{}
\DoxyCodeLine{492     \textcolor{comment}{// Iterate over inside}}
\DoxyCodeLine{493     \textcolor{keywordflow}{while}(k<(\textcolor{keywordtype}{int})jc[j+1])}
\DoxyCodeLine{494     \{}
\DoxyCodeLine{495       \textcolor{comment}{//cout<<ir[k]<<"{} "{}<<j<<"{} "{}<<pr[k]<<endl;}}
\DoxyCodeLine{496       assert((\textcolor{keywordtype}{int})ir[k]<m);}
\DoxyCodeLine{497       assert((\textcolor{keywordtype}{int})j<n);}
\DoxyCodeLine{498       MIJV.push\_back(Triplet<MT >(ir[k],j,pr[k]));}
\DoxyCodeLine{499       k++;}
\DoxyCodeLine{500     \}}
\DoxyCodeLine{501   \}}
\DoxyCodeLine{502   M.resize(m,n);}
\DoxyCodeLine{503   M.setFromTriplets(MIJV.begin(),MIJV.end());}
\DoxyCodeLine{504 }
\DoxyCodeLine{505   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{506 \}}
\DoxyCodeLine{507 }
\DoxyCodeLine{508 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} igl::matlab::MatlabWorkspace::find( }
\DoxyCodeLine{509   \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{510   \textcolor{keywordtype}{int} \& v)}
\DoxyCodeLine{511 \{}
\DoxyCodeLine{512   \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{513   \textcolor{keyword}{const} \textcolor{keywordtype}{int} i = std::find(names.begin(), names.end(), name)-\/names.begin();}
\DoxyCodeLine{514   \textcolor{keywordflow}{if}(i>=(\textcolor{keywordtype}{int})names.size())}
\DoxyCodeLine{515   \{}
\DoxyCodeLine{516     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{517   \}}
\DoxyCodeLine{518   assert(i<=(\textcolor{keywordtype}{int})data.size());}
\DoxyCodeLine{519   mxArray * mx\_data = data[i];}
\DoxyCodeLine{520   assert(!mxIsSparse(mx\_data));}
\DoxyCodeLine{521   assert(mxGetNumberOfDimensions(mx\_data) == 2);}
\DoxyCodeLine{522   \textcolor{comment}{//cout<<name<<"{}: "{}<<mxGetM(mx\_data)<<"{} "{}<<mxGetN(mx\_data)<<endl;}}
\DoxyCodeLine{523   assert(mxGetNumberOfElements(mx\_data) == 1);}
\DoxyCodeLine{524   copy(}
\DoxyCodeLine{525     mxGetPr(mx\_data),}
\DoxyCodeLine{526     mxGetPr(mx\_data)+mxGetNumberOfElements(mx\_data),}
\DoxyCodeLine{527     \&v);}
\DoxyCodeLine{528   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{529 \}}
\DoxyCodeLine{530 }
\DoxyCodeLine{531 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} igl::matlab::MatlabWorkspace::find( }
\DoxyCodeLine{532   \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{533   \textcolor{keywordtype}{double} \& d)}
\DoxyCodeLine{534 \{}
\DoxyCodeLine{535   \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{536   \textcolor{keyword}{const} \textcolor{keywordtype}{int} i = std::find(names.begin(), names.end(), name)-\/names.begin();}
\DoxyCodeLine{537   \textcolor{keywordflow}{if}(i>=(\textcolor{keywordtype}{int})names.size())}
\DoxyCodeLine{538   \{}
\DoxyCodeLine{539     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{540   \}}
\DoxyCodeLine{541   assert(i<=(\textcolor{keywordtype}{int})data.size());}
\DoxyCodeLine{542   mxArray * mx\_data = data[i];}
\DoxyCodeLine{543   assert(!mxIsSparse(mx\_data));}
\DoxyCodeLine{544   assert(mxGetNumberOfDimensions(mx\_data) == 2);}
\DoxyCodeLine{545   \textcolor{comment}{//cout<<name<<"{}: "{}<<mxGetM(mx\_data)<<"{} "{}<<mxGetN(mx\_data)<<endl;}}
\DoxyCodeLine{546   assert(mxGetNumberOfElements(mx\_data) == 1);}
\DoxyCodeLine{547   copy(}
\DoxyCodeLine{548     mxGetPr(mx\_data),}
\DoxyCodeLine{549     mxGetPr(mx\_data)+mxGetNumberOfElements(mx\_data),}
\DoxyCodeLine{550     \&d);}
\DoxyCodeLine{551   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{552 \}}
\DoxyCodeLine{553 }
\DoxyCodeLine{554 \textcolor{keyword}{template} <\textcolor{keyword}{typename} DerivedM>}
\DoxyCodeLine{555 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} igl::matlab::MatlabWorkspace::find\_index( }
\DoxyCodeLine{556   \textcolor{keyword}{const} std::string \& name,}
\DoxyCodeLine{557   Eigen::PlainObjectBase<DerivedM>\& M)}
\DoxyCodeLine{558 \{}
\DoxyCodeLine{559   \textcolor{keywordflow}{if}(!find(name,M))}
\DoxyCodeLine{560   \{}
\DoxyCodeLine{561     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{562   \}}
\DoxyCodeLine{563   M.array() -\/= 1;}
\DoxyCodeLine{564   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{565 \}}
\DoxyCodeLine{566 }
\DoxyCodeLine{567 }
\DoxyCodeLine{568 \textcolor{comment}{//template <typename Data>}}
\DoxyCodeLine{569 \textcolor{comment}{//bool igl::matlab::MatlabWorkspace::save(const Data \& M, const std::string \& name)}}
\DoxyCodeLine{570 \textcolor{comment}{//\{}}
\DoxyCodeLine{571 \textcolor{comment}{//  using namespace std;}}
\DoxyCodeLine{572 \textcolor{comment}{//  // If I don't know the type then I can't save it}}
\DoxyCodeLine{573 \textcolor{comment}{//  cerr<<"{}\string^MatlabWorkspace::save Error: Unknown data type. "{}<<}}
\DoxyCodeLine{574 \textcolor{comment}{//    name<<"{} not saved."{}<<endl;}}
\DoxyCodeLine{575 \textcolor{comment}{//  return false;}}
\DoxyCodeLine{576 \textcolor{comment}{//\}}}
\DoxyCodeLine{577 }
\DoxyCodeLine{578 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{579 }

\end{DoxyCode}
