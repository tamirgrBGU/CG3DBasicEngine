\hypertarget{_mex_stream_8h_source}{}\doxysection{Mex\+Stream.\+h}
\label{_mex_stream_8h_source}\index{igl/matlab/MexStream.h@{igl/matlab/MexStream.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// This file is part of libigl, a simple c++ geometry processing library.}}
\DoxyCodeLine{2 \textcolor{comment}{// }}
\DoxyCodeLine{3 \textcolor{comment}{// Copyright (C) 2013 Alec Jacobson <alecjacobson@gmail.com>}}
\DoxyCodeLine{4 \textcolor{comment}{// }}
\DoxyCodeLine{5 \textcolor{comment}{// This Source Code Form is subject to the terms of the Mozilla Public License }}
\DoxyCodeLine{6 \textcolor{comment}{// v. 2.0. If a copy of the MPL was not distributed with this file, You can }}
\DoxyCodeLine{7 \textcolor{comment}{// obtain one at http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef IGL\_MATLAB\_MEX\_STREAM\_H}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define IGL\_MATLAB\_MEX\_STREAM\_H}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{11 \textcolor{keyword}{namespace }igl}
\DoxyCodeLine{12 \{}
\DoxyCodeLine{13   \textcolor{keyword}{namespace }matlab}
\DoxyCodeLine{14   \{}
\DoxyCodeLine{15     \textcolor{comment}{// http://stackoverflow.com/a/249008/148668}}
\DoxyCodeLine{16     }
\DoxyCodeLine{17     \textcolor{comment}{// Class to implement "{}cout"{} for mex files to print to the matlab terminal}}
\DoxyCodeLine{18     \textcolor{comment}{// window.}}
\DoxyCodeLine{19     \textcolor{comment}{//}}
\DoxyCodeLine{20     \textcolor{comment}{// Insert at the beginning of mexFunction():}}
\DoxyCodeLine{21     \textcolor{comment}{//  MexStream mout;}}
\DoxyCodeLine{22     \textcolor{comment}{//  std::streambuf *outbuf = std::cout.rdbuf(\&mout); }}
\DoxyCodeLine{23     \textcolor{comment}{//  ...}}
\DoxyCodeLine{24     \textcolor{comment}{//  ALWAYS restore original buffer to avoid memory leak problems in matlab}}
\DoxyCodeLine{25     \textcolor{comment}{//  std::cout.rdbuf(outbuf);}}
\DoxyCodeLine{26     \textcolor{comment}{//}}
\DoxyCodeLine{27     \textcolor{keyword}{class }\mbox{\hyperlink{classigl_1_1matlab_1_1_mex_stream}{MexStream}} : \textcolor{keyword}{public} std::streambuf}
\DoxyCodeLine{28     \{}
\DoxyCodeLine{29       \textcolor{keyword}{public}:}
\DoxyCodeLine{30       \textcolor{keyword}{protected}:}
\DoxyCodeLine{31         \textcolor{keyword}{inline} \textcolor{keyword}{virtual} std::streamsize xsputn(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, std::streamsize n); }
\DoxyCodeLine{32         \textcolor{keyword}{inline} \textcolor{keyword}{virtual} \textcolor{keywordtype}{int} overflow(\textcolor{keywordtype}{int} c = EOF);}
\DoxyCodeLine{33     \}; }
\DoxyCodeLine{34   \}}
\DoxyCodeLine{35 \}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{comment}{// Implementation }}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#include <mex.h>}}
\DoxyCodeLine{39 \textcolor{keyword}{inline} std::streamsize igl::matlab::MexStream::xsputn(}
\DoxyCodeLine{40   \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, }
\DoxyCodeLine{41   std::streamsize n) }
\DoxyCodeLine{42 \{}
\DoxyCodeLine{43   mexPrintf(\textcolor{stringliteral}{"{}\%.*s"{}},n,s);}
\DoxyCodeLine{44   mexEvalString(\textcolor{stringliteral}{"{}drawnow;"{}}); \textcolor{comment}{// to dump string.}}
\DoxyCodeLine{45   \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{46 \}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48 \textcolor{keyword}{inline} \textcolor{keywordtype}{int} igl::matlab::MexStream::overflow(\textcolor{keywordtype}{int} c) }
\DoxyCodeLine{49 \{}
\DoxyCodeLine{50     \textcolor{keywordflow}{if} (c != EOF) \{}
\DoxyCodeLine{51       mexPrintf(\textcolor{stringliteral}{"{}\%.1s"{}},\&c);}
\DoxyCodeLine{52       mexEvalString(\textcolor{stringliteral}{"{}drawnow;"{}}); \textcolor{comment}{// to dump string.}}
\DoxyCodeLine{53     \}}
\DoxyCodeLine{54     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{55 \}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
